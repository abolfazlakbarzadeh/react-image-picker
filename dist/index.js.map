{"mappings":";;;;;;;;;;;;;;;;;;;;;;AGOA,gCAAgC;AAChC,MAAM;AAEC,MAAM,4CAAW;IACtB,MAAM,MAAM,CAAA,GAAA,mBAAK,EAAkB;IAEnC,MAAM,eAAe;QACnB,MAAM,SAAS,IAAI,OAAO,EAAE,uBAAuB,SAAS,CAAC,EAAE;QAC/D,IAAI,QAAQ;YACV,OAAO,SAAS,CAAC,MAAM,CAAC;YACxB,IAAI,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC;QAC5B;IACF;IACA,MAAM,YAAY;QAChB,MAAM,SAAS,IAAI,OAAO,EAAE,uBAAuB,SAAS,CAAC,EAAE;QAC/D,IAAI,QAAQ;YACV,OAAO,SAAS,CAAC,GAAG,CAAC;YACrB,IAAI,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC;QAC/B;IACF;IAEA,MAAM,iBACJ,CAAC,YAAY,IAAI,GACjB;YACE,MAAM,YAAY;YAClB,IAAI,WACF,IAAI,OAAO,EAAE,UAAU,IAAI;iBAE3B,IAAI,OAAO,EAAE,UAAU,OAAO;QAElC;IACF,MAAM,mBAAmB,CAAC;QACxB,QAAQ,GAAG,CAAC,oBAAoB;mBAC9B;QACF;IACF;IACA,MAAM,kBAAkB,CAAC;QACvB,QAAQ,GAAG,CAAC,mBAAmB;mBAC7B;QACF;IACF;IACA,MAAM,mBAAmB,CAAC;QACxB,QAAQ,GAAG,CAAC,oBAAoB;mBAC9B;QACF;IACF;IACA,MAAM,mBAAmB,CAAC;QACxB,QAAQ,GAAG,CAAC,oBAAoB;mBAC9B;QACF;IACF;IACA,MAAM,cAAc,CAAC;QACnB,QAAQ,GAAG,CAAC,eAAe;mBACzB;QACF;IACF;IAEA,SAAS,iBACP,MAAkD;QAElD,MAAM,cAAc,CAAC;YACnB,OAAO,CAAC;gBACN,MAAM,cAAc;gBACpB,MAAM,eAAe;gBACrB,QAAQ;YACV;QACF;QACA,MAAM,WAAW,CAAC;YAChB,OAAO,OAAO,CAAC,QAAQ,OAAO,CAAC,CAAC,CAAC,OAAO,QAAQ,GAC9C,IAAI,OAAO,AAAC,CAAC,OAAO,CAAC,OAAO,YAAY,UAAU;QAEtD;QACA,IAAI,IAAI,OAAO,EAAE;YACf,SAAS;gBACP,WAAW;gBACX,UAAU;gBACV,WAAW;gBACX,WAAW;gBACX,MAAM;YACR;YACA,SAAS;gBACP,WAAW;gBACX,UAAU;gBACV,WAAW;gBACX,WAAW,eAAe;gBAC1B,MAAM,eAAe;YACvB;YACA,SAAS;gBACP,WAAW;gBACX,YAAY;YACd;QACF;IACF;IAEA,CAAA,GAAA,sBAAQ,EAAE;QACR,iBAAiB;QAEjB,OAAO;YACL,iBAAiB;QACnB;IACF,GAAG,EAAE;IAEL,MAAM,cAAc,CAAC;QACnB,QAAQ,GAAG,CAAC,eAAe;mBACzB;QACF;IACF;IAEA,qBACE,sCAAC;QACC,KAAK;QACL,IAAG;QACH,WAAW,CAAA,GAAA,2CAAS,EAClB;kBAGF,cAAA,sCAAC;YAAI,WAAU;;8BACb,sCAAC;oBAAK,WAAU;8BACd,cAAA,sCAAC;wBACC,MAAK;wBACL,QAAQ;wBACR,QAAO;wBACP,WAAU;wBACV,UAAU;;;;;;;;;;;8BAGd,sCAAC;oBAAI,WAAU;;sCACb,sCAAC;4BACC,KAAK,oCAAc,IAAI;4BACvB,WAAU;4BACV,KAAI;;;;;;sCAEN,sCAAC;4BAAI,WAAU;sCAAmD;;;;;;;;;;;;;;;;;;;;;;;AAO5E;;;AD9IA,MAAM,oCAAc;IAClB,qBAAO,sCAAC,CAAA,GAAA,yCAAO;;;;;AACjB;IAEA,2CAAe","sources":["src/index.ts","src/image-picker/index.ts","src/image-picker/image-picker.tsx","src/image-picker/components/drag-drop/drag-drop.tsx"],"sourcesContent":["export { default as ImagePicker } from \"./image-picker\";\n","export { default } from \"./image-picker\";\n","import \"../styles/global.scss\";\nimport React, { useRef } from \"react\";\nimport { DragDrop } from \"./components/drag-drop/drag-drop\";\n\nconst ImagePicker = () => {\n  return <DragDrop />;\n};\n\nexport default ImagePicker;\n","import React from \"react\";\nimport { ChangeEventHandler } from \"react\";\nimport { useCallback } from \"react\";\nimport { useEffect } from \"react\";\nimport { useRef } from \"react\";\nimport classNames from \"classnames\";\nimport \"./drag-drop.scss\";\n// import dragDropImage from \"\";\nconst dragDropImage = new URL(\"../../../images/drag-drop.png\", import.meta.url);\n\nexport const DragDrop = () => {\n  const ref = useRef<HTMLDivElement>(null);\n\n  const removeShield = () => {\n    const shield = ref.current?.getElementsByClassName(\"shield\")[0];\n    if (shield) {\n      shield.classList.remove(\"pointer-events-none\");\n      ref.current.classList.add(\"mouse-over\");\n    }\n  };\n  const addShield = () => {\n    const shield = ref.current?.getElementsByClassName(\"shield\")[0];\n    if (shield) {\n      shield.classList.add(\"pointer-events-none\");\n      ref.current.classList.remove(\"mouse-over\");\n    }\n  };\n\n  const hightlightZone =\n    (highlight = true) =>\n    () => {\n      const className = \"drag-over\";\n      if (highlight) {\n        ref.current?.classList.add(className);\n      } else {\n        ref.current?.classList.remove(className);\n      }\n    };\n  const dragEnterHandler = (event: DragEvent) => {\n    console.log(\"dragEnterHandler\", {\n      event,\n    });\n  };\n  const dragOverHandler = (event: DragEvent) => {\n    console.log(\"dragOverHandler\", {\n      event,\n    });\n  };\n  const dragLeaveHandler = (event: DragEvent) => {\n    console.log(\"dragLeaveHandler\", {\n      event,\n    });\n  };\n  const dragStartHandler = (event: DragEvent) => {\n    console.log(\"dragStartHandler\", {\n      event,\n    });\n  };\n  const dropHandler = (event: DragEvent) => {\n    console.log(\"dropHandler\", {\n      event,\n    });\n  };\n\n  function handleZoneEvents(\n    action: \"addEventListener\" | \"removeEventListener\"\n  ) {\n    const preventFunc = (handler: Function) => {\n      return (event: any) => {\n        event.preventDefault();\n        event.stopPropagation();\n        handler(event);\n      };\n    };\n    const setEvent = (events: Record<string, Function>) => {\n      Object.entries(events).forEach(([event, handler]) =>\n        ref.current![action](event, preventFunc(handler), false)\n      );\n    };\n    if (ref.current) {\n      setEvent({\n        dragenter: dragEnterHandler,\n        dragover: dragOverHandler,\n        dragleave: dragLeaveHandler,\n        dragstart: dragStartHandler,\n        drop: dropHandler,\n      });\n      setEvent({\n        dragenter: hightlightZone(),\n        dragover: hightlightZone(),\n        dragstart: hightlightZone(),\n        dragleave: hightlightZone(false),\n        drop: hightlightZone(false),\n      });\n      setEvent({\n        mouseover: removeShield,\n        mouseleave: addShield,\n      });\n    }\n  }\n\n  useEffect(() => {\n    handleZoneEvents(\"addEventListener\");\n\n    return () => {\n      handleZoneEvents(\"removeEventListener\");\n    };\n  }, []);\n\n  const handleFiles = (files: any) => {\n    console.log(\"handleFiles\", {\n      files,\n    });\n  };\n\n  return (\n    <div\n      ref={ref}\n      id=\"drag-drop\"\n      className={classNames(\n        \" p-6 border rounded-[1rem] flex items-center justify-center relative overflow-hidden\"\n      )}\n    >\n      <div className=\"shield pointer-events-none\">\n        <form className=\"opacity-0\">\n          <input\n            type=\"file\"\n            multiple\n            accept=\"image/*\"\n            className=\"absolute inset-0\"\n            onChange={handleFiles}\n          />\n        </form>\n        <div className=\"flex flex-col gap-4 items-center  pointer-events-none\">\n          <img\n            src={dragDropImage.href}\n            className=\"w-[5rem] h-[5rem] opacity-50 z-0\"\n            alt=\"\"\n          />\n          <div className=\"text-[1rem] text-center opacity-50 max-w-[20rem]\">\n            برای انتخاب عکس کلیک کنید یا عکس ها را به اینجا بکشید\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n"],"names":[],"version":3,"file":"index.js.map","sourceRoot":"../"}